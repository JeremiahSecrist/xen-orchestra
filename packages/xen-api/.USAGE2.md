```js
import { Xapi } from 'xen-api'

// bare-bones XAPI client
const xapi = new Xapi({
  // URL to a host belonging to the XCP-ng/XenServer pool we want to connect to
  url: 'https://xen1.company.net',

  // credentials used to connect to this XAPI
  auth: {
    user: 'root',
    password: 'important secret password',
  },

  // if true, only side-effects free calls will be allowed
  readOnly: false,
})

// ensure that the connection is working
await xapi.checkConnection()

// call a XAPI method
//
// see available methods there: https://xapi-project.github.io/xen-api/
const result = await xapi.call(
  // name of the method
  'VM.snapshot',

  // list of params
  [vm.$ref, 'My new snapshot'],

  // options
  {
    // AbortSignal that can be used to stop the call
    //
    // Note: this will not stop/rollback the side-effects of the call
    signal,
  }
)

// after a call (or checkConnection) has succeed, the following properties are available

// list of classes available on this XAPI
xapi.classes

// timestamp of the last reply from XAPI
xapi.lastReply

// pool record of this XAPI
xapi.pool

// secret identifier of the current session
//
// it might become obsolete, in that case, it will be automatically renewed by the next call
xapi.sessionId
```

```js
import { Watcher } from 'xen-api/events'

const watcher = new Watcher(xapi)

const stop = watcher.watch(
  // class that we are interested in
  //
  // use `*` for all classes
  'pool',

  event => {}
)
```
